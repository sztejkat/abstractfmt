<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>sztejkat.abstractfmt - Indicator format</title>
      
  <meta http-equiv="content-type"
 content="text/html; charset=UTF-8">
</head>
<body>
	
	<h1 id="indicators">Indicator format</h1>
	<h2>Introduction</h2>
	Indicator format is bottom layer below the "event format".
	When "signals" in "signal format" is used to build "events"
	"indicators" in "indicator format" are used to build
	both signals and primitive types type description.
	<p>
	Indicator stream is based of a flat sequence of 
	"indicators" interlaved with "data". 
	
	<h2>Indicator</h2>
	Indicator is just a fixed, un-named, enumerated "something"
	which is stored in stream. We have following kinds of indicators:
	<ul>
		<li>those related to signals;</li>
		<li>those related to data type description;</li>
	</ul>
	
	<h2>Signal indicators</h2>
	Signal indicators are:
	<ul>
		<li>for begin signals
			<ul>
				<li>begin-direct - begin signal with directly encode signal name;</li>
				<li>begin-register - begin signal with directly encoded name and
				an integer number which is assigned to the name to be recalled in
				later, shorted <i>begin-use</i> indicator. This number is assumed 
				to start from zero and increment with each registration so it
				can, but does not have to be stored inside a stream;</li>
				<li>begin-use - begin signal with directly encoded number assigned
				in previous <i>begin-register</i>;</li>
			</ul>
		</li>
		<li>end - indiactor for end signal;</li>
		<li>for optimized end-followed-by-begin:
			<ul>
				<li>end-begin-direct;</li>
				<li>end-begin-register;</li>
				<li>end-begin-use;</li>
			</ul>
			all understood as a compact form of writing "end" and then later the "begin";</li>
		</li> 
	</ul>
	
	<h2>Data indicators</h2>
	We have basicallty two kinds of indicators:
	<ul>
		<li>type indicators - which are saying: "the data after this indicator is Java primitive
			of such and such type"; </li>
		<li>flush indicators - which are saying: "the data before this indicator were Java primitive
			of such and such type"; </li>
	</ul>
	Flush indicators are optional, that is the API for described signal format 
	is ALWAYS REQUIRED to call the proper write methods for both type and flush indicators,
	but the indicator format may actually decide to:
	<ul>	
		<li>write flush, typed accurately;</li>
		<li>write flush, separating only elementary primitives from blocks of primitives;</li>
		<li>write generic flush not carying any kind of type information;</li>
		<li>not write flush indicator at all;</li> 
	</ul>
	This behaviour is indicator format specific.
	
	<h2>Reading indicator stream</h2>
	Reading consists of three kinds of operations:
	<ul>
		<li>checking if under cursor there is data or indicator and providing information
		about what indicator it is;</li>
		<li>moving cursor next, either at the indicator after a data block, or at an
		indicator or data block after an indicator;</li>
		<li>reading primitive data with dedicated methods;</li>
	</ul>

	<h2>Defensive?</h2>
	Indicator format does not have to defend against missuse. If it is used incorrectly
	it mail fail miserably to either produce corred stream or read.
	
</body>
</html>
